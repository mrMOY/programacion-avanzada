<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1/0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://unpkg.com/vue@3"></script>
</head>
<body>
    <div id="contenedor">
        
        <!-- <form  style="width: 230px;">
            <fieldset>
                <legend >ACCESO AL PANEL</legend>

                <legend >CORREO</legend>
                <input type="email" v-model="email"> <br>
                <legend>PASSWORD</legend>
                <input Type="password" v-model="password"> <br><br>

                <button @click="login" > ACCEDER</button>
            </fieldset>
        </form> -->

        <form style="width: 230px; margin:0px auto;" >
            <div class="mb-3">
              <label for="exampleInputEmail1" class="form-label">Email address</label>
              <input type="email" v-model="email" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp">
            </div>
            <div class="mb-3">
              <label for="exampleInputPassword1" class="form-label">Password</label>
              <input type="password" v-model="password" class="form-control" id="exampleInputPassword1">
            </div>
            <button type="submit" @click="login" class="btn btn-primary">ACCEDER</button>
          </form>


    <script type="text/javascript">
        

        const {createApp} = Vue;
        const data = null;
        const error = null;

        const app = createApp({
          data() {
            return {
                users: [],
                email: '',
                password:''
            }
          },
          methods:{

            login(e){
                console.log("asd");
                e.preventDefault();

                var correo;
                var access = this.users.map((u)  => {      
                    if (this.email === u.email.toLowerCase()) {     
                        if (this.password === u.password.toLowerCase()) { 
                            correo  = u.email.toLowerCase();
                            sessionStorage.setItem('correo', correo);      
                            location.href = 'usuarios.html';
                        }
                    }
                })
                console.log(access)
            }
            

          },
          mounted(){
            fetch ('users.json')
                .then((res) => res.json())
                .then((json) => (this.users = json))
                .catch ((err)=> (console.log(err)))
             }

        }).mount('#contenedor')
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
</body>
</html>